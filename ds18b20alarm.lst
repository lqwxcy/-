C51 COMPILER V9.00   DS18B20ALARM                                                          05/31/2013 22:02:19 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE DS18B20ALARM
OBJECT MODULE PLACED IN .\output\ds18b20alarm.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE src\ds18b20alarm.c BROWSE DEBUG OBJECTEXTEND PRINT(.\output\ds18b20alarm.ls
                    -t) OBJECT(.\output\ds18b20alarm.obj)

line level    source

   1          /*********************************************************** 
   2          ÎÄ¼şÃû³Æ£º DS18b20ÎÂ¶È±¨¾¯º¯Êı
   3          ×÷ Õß£º    ÁºÈ¨Íş
   4          °æ ±¾£º    0.01
   5          Ëµ Ã÷£º    
   6          Ê±¼ä £º    2012Äê12ÔÂ19ÈÕ20:50:58
   7          ĞŞ¸Ä¼ÇÂ¼£º
   8          ×Ü½á £º   1£ºÒ»¶¨Òª½Ó4.7KµÄÉÏÀ­µç×è     
   9                            2: °ÑÊı¾İÀàĞÍ¶¨Òå³Éextern  idata S8  Alarm_Temp[ 2 ]Êı¾İ²»¶Ô£¬Ó¦¸ÃÉèÖÃ³Éextern  S8 idata Alarm_Temp[ 2
             - ]
  10          ***********************************************************/
  11          #include"ds18b20alarm.h"
  12          #include"ds18b20.h"
  13          #include"LCD12864.h"
  14          #include"ds18b20distemp.h"
  15          
  16          /*------------------------------------------
  17                  ¶¨Òå²Ù×÷±äÁ¿
  18          -------------------------------------------*/
  19          u8 idata Alarm_H_L_Str[] = "HI:     LI:     ";
  20                                                          // "0123456789876543"
  21          S8 idata Alarm_Temp[] = {19,12};        //ÎÂ¶È±¨¾¯Öµ(Èç¹ûÉèÖÃÎÂ¶ÈÎª×îµÍÎª14£¬µ«ÎÂ¶ÈÏÔÊ¾Îª14.9¶ÈÊ±£¬LEDµÆ»áÉÁË¸£¬Ò
             -òÎªÎÂ¶È) 
  22                                          
  23          bit H_Alarm = 0;        //¶¨ÒåÁ½¸öÎÂ¶È±¨¾¯±êÖ¾Î»
  24          bit L_Alarm = 0;
  25          
  26          /*********************************************************** 
  27          º¯ÊıÃû³Æ£º       void Alarm_Temperature()
  28          º¯Êı¹¦ÄÜ£º       ÎÂ¶È±¨¾¯´¦Àí
  29          £©Á½¸öÊı×é                 
  30          Èë¿Ú²ÎÊı£º       
  31          ³ö¿Ú²ÎÊı£º       
  32          ±¸ ×¢£º    ÕâÊÇ×Ô¼ºÉèÖÃµÄÎÂ¶È£¬µ«×Ô¼ºÉèÖÃµÄÎÂ¶ÈÒ²ÒªÅĞ¶ÏÊÇÉèÖÃ¸ºÊı»¹ÊÇÕıÖµ£¬»¹Òª¶ÔÉèÖÃµÄÊı½øĞĞ·Ö½â²ÅÄÜÔÚLCD
             -12864ÏÔÊ¾³öÀ´
  33          ***********************************************************/
  34          void Alarm_Temperature()
  35          {
  36   1              //ÅĞ¶ÏĞ´ÈëDS18B20ÊÇÉÏÏŞÖµ
  37   1              u8 ng = 0;
  38   1      
  39   1              if( Alarm_Temp[ 0 ] < 0 )
  40   1              {
  41   2                      Alarm_Temp[ 0 ] = ~Alarm_Temp[ 0 ] + 1;
  42   2                      ng = 1;
  43   2              }
  44   1              //ÕâÊÇ×Ô¼ºÉèÖÃµÄÎÂ¶È£¬µ«×Ô¼ºÉèÖÃµÄÎÂ¶ÈÒ²ÒªÅĞ¶ÏÊÇÉèÖÃ¸ºÊı»¹ÊÇÕıÖµ£¬»¹Òª¶ÔÉèÖÃµÄÊı½øĞĞ·Ö½â²ÅÄÜÔÚLCD12864ÏÔÊ
             -¾³öÀ´
  45   1              Alarm_H_L_Str[ 4 ] = Alarm_Temp[ 0 ] / 100 + '0'; 
  46   1              Alarm_H_L_Str[ 5 ] = Alarm_Temp[ 0 ] / 10 % 10 + '0';
  47   1              Alarm_H_L_Str[ 6 ] = Alarm_Temp[ 0 ] % 10 + '0';
  48   1              
  49   1              if( Alarm_H_L_Str[ 4 ] == 0 )
  50   1                      Alarm_H_L_Str[ 4 ] = ' ';
C51 COMPILER V9.00   DS18B20ALARM                                                          05/31/2013 22:02:19 PAGE 2   

  51   1              if( Alarm_H_L_Str[ 4 ] == 0 && Alarm_H_L_Str[ 5 ] == 0 )
  52   1                      Alarm_H_L_Str[ 5 ] = ' ';
  53   1      
  54   1              if( ng )//ÅĞ¶Ï¸ºÖµ±êÖ¾
  55   1              {
  56   2                      if( Alarm_H_L_Str[ 5 ] ==' ' )
  57   2                              Alarm_H_L_Str[ 5 ] = '-';
  58   2                      else if( Alarm_H_L_Str[ 4 ] == ' ' )
  59   2                              Alarm_H_L_Str[ 4 ] = '-';
  60   2                      else
  61   2                              Alarm_H_L_Str[ 3 ] = '-';
  62   2              }
  63   1      
  64   1              ng = 0;  //ÏÂÏŞ´¦Àí
  65   1      
  66   1              if( Alarm_Temp[ 1 ] < 0 )
  67   1              {
  68   2                      Alarm_Temp[ 1 ] = ~Alarm_Temp[ 1 ] + 1;
  69   2                      ng = 1;
  70   2              }
  71   1      
  72   1              //ÕâÊÇ×Ô¼ºÉèÖÃµÄÎÂ¶È£¬µ«×Ô¼ºÉèÖÃµÄÎÂ¶ÈÒ²ÒªÅĞ¶ÏÊÇÉèÖÃ¸ºÊı»¹ÊÇÕıÖµ£¬»¹Òª¶ÔÉèÖÃµÄÊı½øĞĞ·Ö½â²ÅÄÜÔÚLCD12864ÏÔÊ
             -¾³öÀ´
  73   1              Alarm_H_L_Str[ 12 ] = Alarm_Temp[ 1 ] / 100 + '0';
  74   1              Alarm_H_L_Str[ 13 ] = Alarm_Temp[ 1 ] / 10 % 10 + '0';
  75   1              Alarm_H_L_Str[ 14 ] = Alarm_Temp[ 1 ] % 10 + '0';
  76   1      
  77   1              if( Alarm_H_L_Str[ 12 ] == 0 )
  78   1                      Alarm_H_L_Str[ 12 ] = ' ';
  79   1              if( Alarm_H_L_Str[ 12 ] == 0 && Alarm_H_L_Str[ 13 ] == 0 )
  80   1                      Alarm_H_L_Str[ 13 ] = ' ';
  81   1      
  82   1              if( ng )//ÅĞ¶Ï¸ºÖµ±êÖ¾
  83   1              {
  84   2                      if( Alarm_H_L_Str[ 13 ] ==' ' )
  85   2                              Alarm_H_L_Str[ 13 ] = '-';
  86   2                      else if( Alarm_H_L_Str[ 12 ] == ' ' )
  87   2                              Alarm_H_L_Str[ 12 ] = '-';
  88   2                      else
  89   2                              Alarm_H_L_Str[ 11 ] = '-';
  90   2              }
  91   1      
  92   1              LCD_PutString( 0, 3, Alarm_H_L_Str );   
  93   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    249    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =     19    ----
   BIT SIZE         =      2    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
